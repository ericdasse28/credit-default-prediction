schema: '2.0'
stages:
  preprocess:
    cmd: poetry run preprocess_data --raw-data-path data/raw/train.csv 
      --preprocessed-data-path data/clean/train.csv
    deps:
    - path: credit_default_prediction/preprocessing.py
      hash: md5
      md5: d359da857e6c351bedd94c3562545b05
      size: 3865
    - path: data/raw/train.csv
      hash: md5
      md5: 8e3a2fa60e877a2bfd8da21b2791890d
      size: 1239852
    outs:
    - path: data/clean/train.csv
      hash: md5
      md5: 1e6236b87fe5fbd39fc6b3655725a941
      size: 1102126
  split:
    cmd: poetry run split --raw-data-path data/raw/cr_loan2.csv --train-path 
      data/raw/train.csv --test-path data/raw/test.csv
    deps:
    - path: credit_default_prediction/split.py
      hash: md5
      md5: 42e7aafb4ec0b1f276f8fff0de462e09
      size: 2081
    - path: data/raw/cr_loan2.csv
      hash: md5
      md5: f55e028c4bc9d2bd4e4e0976599a8994
      size: 1740274
      isexec: true
    params:
      params.yaml:
        split:
          test_size: 0.3
          random_state: 123
    outs:
    - path: data/raw/test.csv
      hash: md5
      md5: 5ec085eb5cd9dcbda6c9b193cc7e6359
      size: 532445
    - path: data/raw/train.csv
      hash: md5
      md5: 8e3a2fa60e877a2bfd8da21b2791890d
      size: 1239852
  train:
    cmd: poetry run train --train-dataset-path data/feature_store/train.csv 
      --model-path model.pkl
    deps:
    - path: credit_default_prediction/training.py
      hash: md5
      md5: 5dc47998624f1bb3db7335d22326ae50
      size: 1418
    - path: data/feature_store/train.csv
      hash: md5
      md5: 820bae9abd11e07638e77f7fa5dc36c7
      size: 1607021
    params:
      params.yaml:
        train:
          learning_rate: 0.3
          max_depth: 4
          min_child_weight: 1
    outs:
    - path: model.pkl
      hash: md5
      md5: 62fc315799bf0bce370090de658fd636
      size: 161216
  evaluate:
    cmd: poetry run evaluate --model-path model.pkl --test-dataset-path 
      data/raw/test.csv
    deps:
    - path: credit_default_prediction/evaluation.py
      hash: md5
      md5: 30acb9adfbfe31767b48b3a458f0a0b6
      size: 2452
    - path: data/raw/test.csv
      hash: md5
      md5: 5ec085eb5cd9dcbda6c9b193cc7e6359
      size: 532445
    - path: model.pkl
      hash: md5
      md5: 62fc315799bf0bce370090de658fd636
      size: 161216
  feature_engineering:
    cmd: poetry run feature_engineering --preprocessed-data-path 
      data/clean/train.csv --feature-store-path data/feature_store/train.csv
    deps:
    - path: credit_default_prediction/feature_engineering.py
      hash: md5
      md5: 3dd3f6244d7c8c1440a0828a2eabcf64
      size: 1054
    - path: data/clean/train.csv
      hash: md5
      md5: 1e6236b87fe5fbd39fc6b3655725a941
      size: 1102126
    params:
      params.yaml:
        feature_engineering:
          important_columns:
          - person_income
          - person_emp_length
          - person_age
          - loan_percent_income
          - loan_int_rate
          - loan_grade
          - loan_amnt
          - loan_intent
          - person_home_ownership
          - loan_status
    outs:
    - path: data/feature_store/train.csv
      hash: md5
      md5: 820bae9abd11e07638e77f7fa5dc36c7
      size: 1607021
  cross_validation:
    cmd: poetry run cross_validate --train-dataset-path 
      data/feature_store/train.csv --model-path model.pkl
    deps:
    - path: data/feature_store/train.csv
      hash: md5
      md5: 820bae9abd11e07638e77f7fa5dc36c7
      size: 1607021
    - path: model.pkl
      hash: md5
      md5: 62fc315799bf0bce370090de658fd636
      size: 161216
    - path: scripts/validate.py
      hash: md5
      md5: acc51de722cb934c1443a4aa2c86772e
      size: 1309
