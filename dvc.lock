schema: '2.0'
stages:
  preprocess:
    cmd: poetry run preprocess --raw-data-path data/raw/cr_loan2.csv --preprocessed-data-path
      data/clean/clean_cr_loan.csv
    deps:
    - path: credit_default_prediction/preprocess.py
      hash: md5
      md5: 1fd9ed1af3c5a7d75d4a98ee986141f3
      size: 2363
    - path: data/raw/cr_loan2.csv
      hash: md5
      md5: f55e028c4bc9d2bd4e4e0976599a8994
      size: 1740274
      isexec: true
    params:
      params.yaml:
        preprocess:
          important_columns:
          - person_income
          - person_emp_length
          - person_age
          - loan_percent_income
          - loan_int_rate
          - loan_amnt
          - loan_intent
          - loan_status
    outs:
    - path: data/clean/clean_cr_loan.csv
      hash: md5
      md5: d4f5850f490f46a8fc5b583c514622c5
      size: 1948068
  split:
    cmd: poetry run split --preprocessed-data-path data/clean/clean_cr_loan.csv --train-path
      data/train.csv --test-path data/test.csv
    deps:
    - path: credit_default_prediction/split.py
      hash: md5
      md5: 1516ee88f00977285def5670e7a9e02b
      size: 1563
    - path: data/clean/clean_cr_loan.csv
      hash: md5
      md5: d4f5850f490f46a8fc5b583c514622c5
      size: 1948068
    params:
      params.yaml:
        split:
          test_size: 0.3
          random_state: 123
    outs:
    - path: data/test.csv
      hash: md5
      md5: aa06845aa667afeb1e646f64858bb4d0
      size: 584518
    - path: data/train.csv
      hash: md5
      md5: 56b1a9021195be4e5c3d335b96c46ae3
      size: 1363790
  train:
    cmd: poetry run train --train-dataset-path data/train.csv --model-path model.pkl
    deps:
    - path: credit_default_prediction/train.py
      hash: md5
      md5: 3f9ce0f79ecce93a6bfc383dd791fc16
      size: 1006
    - path: data/train.csv
      hash: md5
      md5: 56b1a9021195be4e5c3d335b96c46ae3
      size: 1363790
    params:
      params.yaml:
        train:
          learning_rate: 0.2
          max_depth: 6
          min_child_weight: 5
    outs:
    - path: model.pkl
      hash: md5
      md5: 36911286cfaeb7f0acdfc3d80e41f219
      size: 278542
  evaluate:
    cmd: poetry run evaluate --model-path model.pkl --test-dataset-path data/test.csv
    deps:
    - path: credit_default_prediction/evaluate.py
      hash: md5
      md5: 853c1f3b13c84c162edd95761de10c24
      size: 2726
    - path: data/test.csv
      hash: md5
      md5: aa06845aa667afeb1e646f64858bb4d0
      size: 584518
    - path: model.pkl
      hash: md5
      md5: 36911286cfaeb7f0acdfc3d80e41f219
      size: 278542
